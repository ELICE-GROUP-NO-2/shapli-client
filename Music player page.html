<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>음악 웹사이트 - 음악 재생</title>
    <style>
        /* 전체 레이아웃 */
        body {
            margin: 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            font-family: Arial, sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        header {
            padding: 20px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            font-size: 24px;
            width: 100%;
        }

        .container {
            display: flex;
            width: 90%;
            max-width: 1200px;
            margin-top: 20px;
        }

        .player-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            width: 60%;
        }

        .player-container img {
            max-width: 100%;
            border-radius: 10px;
        }

        /* 플레이어 컨트롤 버튼 스타일 */
.controls {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    gap: 20px; /* 버튼 간의 간격 설정 */
}

.controls button {
    background-color: #5563c1; /* 파란색 배경 */
    color: #fff;
    padding: 15px;
    border: none;
    border-radius: 50%; /* 원형 버튼 */
    font-size: 1.5em;
    cursor: pointer;
    transition: background-color 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    width: 60px; /* 버튼의 너비와 높이를 동일하게 설정 */
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.controls button i {
    margin: 0; /* 아이콘의 여백 제거 */
}

.controls button:hover {
    background-color: #667eea; /* 호버 시 색상 변경 */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}
        .controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .controls button {
            background-color: #5865f2;
            border: none;
            color: white;
            font-size: 20px;
            padding: 10px;
            margin: 0 10px;
            border-radius: 50%;
            cursor: pointer;
        }

        .song-info {
            margin-top: 20px;
            text-align: center;
            position: relative;
        }

        .comment-section {
            width: 40%;
            margin-left: 20px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            max-height: 600px; /* 댓글 섹션의 최대 높이 */
        }

        .comment-section h2 {
            margin-bottom: 20px;
            color: white;
        }

        .comment-input {
            width: 95%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: none;
            outline: none;
            resize: none;
            height: 60px;
        }

        .comment-button {
            background-color: #5865f2;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .comment-item {
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .reply-button {
            background-color: #4c51bf;
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 5px;
            margin-top: 10px;
            cursor: pointer;
        }

        .reply-input {
            width: calc(100% - 120px);
            margin-top: 10px;
        }

        .reply-list {
            margin-top: 10px;
            margin-left: 20px;
        }

        .reply-item {
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
        }
        /* 댓글, 답글 좋아요 및 시간 */
        .comment-footer, .reply-footer {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .comment-footer button, .reply-footer button {
            background-color: transparent;
            border: none;
            color: white;
            font-size: 1em;
            cursor: pointer;
        }

        .comment-footer .like-button, .reply-footer .like-button {
            font-size: 1.2em;
            color: white;
        }

        .comment-footer .like-button.liked, .reply-footer .like-button.liked {
            color: #ff6666;
        }

        .comment-footer .time-stamp, .reply-footer .time-stamp {
            font-size: 0.9em;
            color: #cccccc;
        }
    </style>
</head>
<body style="overflow-x:hidden">
    <header>
        SHARING
    </header>
    <div class="container">
        <div class="player-container">
            <img src="https://via.placeholder.com/350" alt="앨범 아트">
            <table border = "0">
                <tr>
                    <td>
            <div class="song-info">
                <h2>노래 제목</h2>
                <button class="like-button" onclick="toggleSongLike(this)">
                    <i class="fas fa-heart"></i>
                </button>
            </td>
            </tr>
            <tr>
            <td>
                <p>아티스트 이름</p>
            </div>
        </td>
    </tr>
            </table>
            <div class="controls">
                <!-- 음악 재생 관련 아이콘들 -->
                <button><i class="fas fa-backward"></i></button>  <!-- 이전 곡 -->
                <button><i class="fas fa-play"></i></button>      <!-- 재생 -->
                <button><i class="fas fa-pause"></i></button>     <!-- 일시정지 -->
                <button><i class="fas fa-forward"></i></button>   <!-- 다음 곡 -->
            </div>
        </div>

        <!-- 댓글 섹션 -->
        <div class="comment-section">
            <h2>댓글</h2>
            <textarea class="comment-input" placeholder="댓글을 입력하세요..."></textarea>
            <button class="comment-button" onclick="addComment()">댓글 등록</button>
            
            <div id="comment-list"></div>
        </div>
    </div>

    <script>
        // 페이지 로드 시 댓글 불러오기
        window.onload = function() {
            loadComments();
        }

        function saveComments(comments) {
            localStorage.setItem('comments', JSON.stringify(comments));
        }

        function loadComments() {
            const commentList = document.getElementById('comment-list');
            commentList.innerHTML = '';
            const comments = JSON.parse(localStorage.getItem('comments')) || [];

            comments.forEach((comment, index) => {
                const commentItem = document.createElement('div');
                commentItem.className = 'comment-item';
                commentItem.innerHTML = `
                    <p>${comment.text}</p>
                    <div class="comment-footer">
                        <button class="like-button" onclick="toggleCommentLike(this)">
                            <i class="fas fa-heart"></i>
                        </button>
                        <span class="time-stamp">${comment.time}</span>
                    </div>
                    <button class="reply-button" onclick="toggleReplyInput(this)">답글</button>
                    <div class="reply-list"></div>
                    <textarea class="reply-input" placeholder="답글을 입력하세요..." style="display: none;"></textarea>
                    <button class="reply-button" onclick="addReply(this, ${index})" style="display: none;">답글 등록</button>
                `;

                const replyList = commentItem.querySelector('.reply-list');
                comment.replies.forEach((reply, replyIndex) => {
                    const replyItem = document.createElement('div');
                    replyItem.className = 'reply-item';
                    replyItem.innerHTML = `
                        <p>${reply.text}</p>
                        <div class="reply-footer">
                            <button class="like-button" onclick="toggleReplyLike(this)">
                                <i class="fas fa-heart"></i>
                            </button>
                            <span class="time-stamp">${reply.time}</span>
                        </div>
                    `;
                    replyList.appendChild(replyItem);
                });

                commentList.appendChild(commentItem);
            });
        }

        function addComment() {
            const commentInput = document.querySelector('.comment-input');
            const commentText = commentInput.value.trim();
            if (commentText === '') return;

            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            // 새로운 댓글 객체 생성
            const newComment = {
                text: commentText,
                replies: []
            };

            // 댓글 배열에 추가
            comments.push(newComment);

            // 로컬 스토리지에 댓글 저장
            saveComments(comments);

            // 댓글 입력란 초기화 및 댓글 목록 갱신
            commentInput.value = '';
            loadComments();
        }

        function toggleReplyInput(replyButton) {
            const replyInput = replyButton.nextElementSibling.nextElementSibling;
            const replySubmitButton = replyInput.nextElementSibling;
            if (replyInput.style.display === 'none') {
                replyInput.style.display = 'block';
                replySubmitButton.style.display = 'block';
            } else {
                replyInput.style.display = 'none';
                replySubmitButton.style.display = 'none';
            }
        }

        function addReply(replyButton, commentIndex) {
            const replyInput = replyButton.previousElementSibling;
            const replyText = replyInput.value.trim();
            if (replyText === '') return;

            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            const currentTime = new Date().toLocaleString();

            // 해당 댓글에 답글 추가
            comments[commentIndex].replies.push({
                text: replyText,
                time: currentTime
            });

            // 로컬 스토리지에 업데이트된 댓글 저장
            saveComments(comments);

            // 대댓글 입력란 초기화 및 댓글 목록 갱신
            replyInput.value = '';
            replyInput.style.display = 'none';
            replyButton.style.display = 'none';
            loadComments();
        }
        function toggleCommentLike(button) {
            button.classList.toggle('liked');
        }

        function toggleReplyLike(button) {
            button.classList.toggle('liked');
        }

        function toggleSongLike(button) {
            button.classList.toggle('liked');
        }
    </script>
</body>
</html>
